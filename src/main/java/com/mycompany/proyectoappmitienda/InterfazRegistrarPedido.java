/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package com.mycompany.proyectoappmitienda;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.util.ArrayList;
import java.util.List;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Felipe
 */
public class InterfazRegistrarPedido extends javax.swing.JFrame {

    Conexion con;
    Connection condb;
    CRUDSqlServer crud;
    List<Producto> listaProductos;
    List<Categoria> ListaCategorias;
    List<Mesa> listaMesas;
    DefaultTableModel modelo;
    String idGrupoI;
    
    /**
     * Creates new form InterfazRegistrarProducto
     */
    public InterfazRegistrarPedido(int numeroMesa, String grupo, List<Persona> listaPersonas) {
        initComponents();
        jRBtnNo.setSelected(true);
        idGrupoI = grupo;
        con = new Conexion();
        condb = con.ObtenerConexion();
        crud = new CRUDSqlServer();
        listaProductos = crud.obtenerProductos(condb);
        ListaCategorias = crud.obtenerCategorias(condb);
        listaMesas = crud.obtenerMesas(condb);
        cargarComboBoxCategoria();
        revisarMesas(numeroMesa, listaPersonas);
        modelo = (DefaultTableModel) jTListaProductos.getModel();
        limpiarTabla();
    }

    public void cargarComboBoxCategoria() {
        for (Categoria categoria : ListaCategorias) {
            jCBCategoria.addItem(categoria.getNombre());
        }
    }

    public void cargarComboBoxProductos() {

        for (Producto producto : listaProductos) {
            jCBNombreProd.addItem(producto.getNombreProducto());
        }
    }

    public void revisarMesas(int mesaSeleccionada, List<Persona> listaPersonas) {
        jTxtFMesa.setText(String.valueOf(mesaSeleccionada));
        for(Persona p : listaPersonas){
            jCBNombre.addItem(p.getNombre() + " "+ p.getApeliido());
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        jBtnRegPedido = new javax.swing.JButton();
        jPanelRegPedido = new javax.swing.JPanel();
        jLblRegPedido = new javax.swing.JLabel();
        jLblNombreProducto = new javax.swing.JLabel();
        jLblCategoria = new javax.swing.JLabel();
        jLblPrecio = new javax.swing.JLabel();
        jLblUnidades = new javax.swing.JLabel();
        jCBCategoria = new javax.swing.JComboBox<>();
        jTxtFPrecio = new javax.swing.JTextField();
        jSpnUnidades = new javax.swing.JSpinner();
        jBtnRegProducto = new javax.swing.JButton();
        jBtnBorrarProducto = new javax.swing.JButton();
        jLblSubtotal = new javax.swing.JLabel();
        jTxtFSubtotal = new javax.swing.JTextField();
        jCBNombreProd = new javax.swing.JComboBox<>();
        jLblNombreProducto1 = new javax.swing.JLabel();
        jTxtFIdProducto = new javax.swing.JTextField();
        jPanelProductos = new javax.swing.JPanel();
        jLblRegProducto3 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTListaProductos = new javax.swing.JTable();
        jBtnEliminarProductoPedido = new javax.swing.JButton();
        jBtnCancelar = new javax.swing.JButton();
        jPanelMesaPer = new javax.swing.JPanel();
        jLblNombre = new javax.swing.JLabel();
        jLblMesa = new javax.swing.JLabel();
        jLblPrecio1 = new javax.swing.JLabel();
        jLblMesaPedido = new javax.swing.JLabel();
        jRBtnSi = new javax.swing.JRadioButton();
        jRBtnNo = new javax.swing.JRadioButton();
        jCBNombre = new javax.swing.JComboBox<>();
        jTxtFMesa = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setMinimumSize(new java.awt.Dimension(800, 700));
        setName("JFrameRegProd"); // NOI18N
        setSize(new java.awt.Dimension(800, 700));

        jBtnRegPedido.setBackground(new java.awt.Color(125, 93, 251));
        jBtnRegPedido.setFont(new java.awt.Font("Trebuchet MS", 0, 18)); // NOI18N
        jBtnRegPedido.setForeground(new java.awt.Color(255, 255, 255));
        jBtnRegPedido.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/diskette.png"))); // NOI18N
        jBtnRegPedido.setText("Registrar");
        jBtnRegPedido.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jBtnRegPedidoMouseClicked(evt);
            }
            public void mousePressed(java.awt.event.MouseEvent evt) {
                jBtnRegPedidoMousePressed(evt);
            }
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jBtnRegPedidoMouseReleased(evt);
            }
        });
        jBtnRegPedido.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnRegPedidoActionPerformed(evt);
            }
        });

        jPanelRegPedido.setBackground(new java.awt.Color(255, 255, 255));
        jPanelRegPedido.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(125, 93, 251), 1, true));
        jPanelRegPedido.setForeground(new java.awt.Color(51, 51, 51));
        jPanelRegPedido.setFont(new java.awt.Font("Trebuchet MS", 0, 18)); // NOI18N

        jLblRegPedido.setFont(new java.awt.Font("Trebuchet MS", 1, 18)); // NOI18N
        jLblRegPedido.setForeground(new java.awt.Color(125, 93, 251));
        jLblRegPedido.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/pedido.PNG"))); // NOI18N
        jLblRegPedido.setText("Registrar Pedido");

        jLblNombreProducto.setFont(new java.awt.Font("Trebuchet MS", 0, 14)); // NOI18N
        jLblNombreProducto.setText("Nombre:");

        jLblCategoria.setFont(new java.awt.Font("Trebuchet MS", 0, 14)); // NOI18N
        jLblCategoria.setText("Categoria:");

        jLblPrecio.setFont(new java.awt.Font("Trebuchet MS", 0, 14)); // NOI18N
        jLblPrecio.setText("Precio:");

        jLblUnidades.setFont(new java.awt.Font("Trebuchet MS", 0, 14)); // NOI18N
        jLblUnidades.setText("Unidades:");

        jCBCategoria.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione" }));
        jCBCategoria.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                jCBCategoriaItemStateChanged(evt);
            }
        });
        jCBCategoria.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCBCategoriaActionPerformed(evt);
            }
        });

        jTxtFPrecio.setFont(new java.awt.Font("Trebuchet MS", 1, 14)); // NOI18N
        jTxtFPrecio.setForeground(new java.awt.Color(125, 95, 219));
        jTxtFPrecio.setText("0");
        jTxtFPrecio.setDisabledTextColor(new java.awt.Color(125, 95, 219));
        jTxtFPrecio.setEnabled(false);
        jTxtFPrecio.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTxtFPrecioActionPerformed(evt);
            }
        });

        jSpnUnidades.addAncestorListener(new javax.swing.event.AncestorListener() {
            public void ancestorAdded(javax.swing.event.AncestorEvent evt) {
            }
            public void ancestorMoved(javax.swing.event.AncestorEvent evt) {
                jSpnUnidadesAncestorMoved(evt);
            }
            public void ancestorRemoved(javax.swing.event.AncestorEvent evt) {
            }
        });
        jSpnUnidades.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSpnUnidadesStateChanged(evt);
            }
        });
        jSpnUnidades.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                jSpnUnidadesPropertyChange(evt);
            }
        });

        jBtnRegProducto.setBackground(new java.awt.Color(125, 93, 251));
        jBtnRegProducto.setFont(new java.awt.Font("Trebuchet MS", 0, 18)); // NOI18N
        jBtnRegProducto.setForeground(new java.awt.Color(255, 255, 255));
        jBtnRegProducto.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/add.png"))); // NOI18N
        jBtnRegProducto.setText("AÃ±adir");
        jBtnRegProducto.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jBtnRegProductoMouseClicked(evt);
            }
            public void mousePressed(java.awt.event.MouseEvent evt) {
                jBtnRegProductoMousePressed(evt);
            }
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jBtnRegProductoMouseReleased(evt);
            }
        });
        jBtnRegProducto.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnRegProductoActionPerformed(evt);
            }
        });

        jBtnBorrarProducto.setFont(new java.awt.Font("Trebuchet MS", 0, 18)); // NOI18N
        jBtnBorrarProducto.setForeground(new java.awt.Color(125, 93, 251));
        jBtnBorrarProducto.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/x-button.png"))); // NOI18N
        jBtnBorrarProducto.setText("Cancelar");
        jBtnBorrarProducto.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(125, 93, 251)));
        jBtnBorrarProducto.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        jBtnBorrarProducto.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnBorrarProductoActionPerformed(evt);
            }
        });

        jLblSubtotal.setFont(new java.awt.Font("Trebuchet MS", 0, 14)); // NOI18N
        jLblSubtotal.setText("Subtotal:");

        jTxtFSubtotal.setFont(new java.awt.Font("Trebuchet MS", 1, 14)); // NOI18N
        jTxtFSubtotal.setForeground(new java.awt.Color(125, 95, 219));
        jTxtFSubtotal.setText("0");
        jTxtFSubtotal.setDisabledTextColor(new java.awt.Color(125, 95, 219));
        jTxtFSubtotal.setEnabled(false);
        jTxtFSubtotal.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTxtFSubtotalActionPerformed(evt);
            }
        });

        jCBNombreProd.setFont(new java.awt.Font("Trebuchet MS", 0, 12)); // NOI18N
        jCBNombreProd.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione" }));
        jCBNombreProd.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                jCBNombreProdItemStateChanged(evt);
            }
        });
        jCBNombreProd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCBNombreProdActionPerformed(evt);
            }
        });

        jLblNombreProducto1.setFont(new java.awt.Font("Trebuchet MS", 0, 14)); // NOI18N
        jLblNombreProducto1.setText("Id:");

        jTxtFIdProducto.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jTxtFIdProducto.setDisabledTextColor(new java.awt.Color(125, 95, 219));
        jTxtFIdProducto.setEnabled(false);

        javax.swing.GroupLayout jPanelRegPedidoLayout = new javax.swing.GroupLayout(jPanelRegPedido);
        jPanelRegPedido.setLayout(jPanelRegPedidoLayout);
        jPanelRegPedidoLayout.setHorizontalGroup(
            jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                .addGap(63, 63, 63)
                .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLblRegPedido, javax.swing.GroupLayout.PREFERRED_SIZE, 238, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                        .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLblCategoria, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jCBCategoria, javax.swing.GroupLayout.PREFERRED_SIZE, 161, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                                .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLblPrecio, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jTxtFPrecio, javax.swing.GroupLayout.PREFERRED_SIZE, 111, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(18, 18, 18)
                                .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jLblUnidades, javax.swing.GroupLayout.DEFAULT_SIZE, 76, Short.MAX_VALUE)
                                    .addComponent(jSpnUnidades))))
                        .addGap(18, 18, 18)
                        .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                                .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLblSubtotal, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jTxtFSubtotal, javax.swing.GroupLayout.PREFERRED_SIZE, 111, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(18, 18, 18)
                                .addComponent(jBtnRegProducto, javax.swing.GroupLayout.PREFERRED_SIZE, 126, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jBtnBorrarProducto, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                                .addComponent(jLblNombreProducto, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(jLblNombreProducto1, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(16, 16, 16))
                            .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                                .addComponent(jCBNombreProd, javax.swing.GroupLayout.PREFERRED_SIZE, 318, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jTxtFIdProducto, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)))))
                .addContainerGap(38, Short.MAX_VALUE))
        );
        jPanelRegPedidoLayout.setVerticalGroup(
            jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                        .addComponent(jLblRegPedido)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLblNombreProducto)
                            .addComponent(jLblNombreProducto1))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jCBNombreProd, javax.swing.GroupLayout.DEFAULT_SIZE, 36, Short.MAX_VALUE)
                            .addComponent(jTxtFIdProducto)))
                    .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                        .addComponent(jLblCategoria)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jCBCategoria, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(18, 18, 18)
                .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jBtnRegProducto, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jBtnBorrarProducto, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanelRegPedidoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                            .addComponent(jLblUnidades)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jSpnUnidades, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                            .addComponent(jLblPrecio)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jTxtFPrecio, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(jPanelRegPedidoLayout.createSequentialGroup()
                            .addComponent(jLblSubtotal)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jTxtFSubtotal, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addContainerGap(18, Short.MAX_VALUE))
        );

        jPanelProductos.setBackground(new java.awt.Color(255, 255, 255));
        jPanelProductos.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(125, 93, 251), 1, true));
        jPanelProductos.setForeground(new java.awt.Color(51, 51, 51));
        jPanelProductos.setFont(new java.awt.Font("Trebuchet MS", 0, 18)); // NOI18N

        jLblRegProducto3.setFont(new java.awt.Font("Trebuchet MS", 1, 14)); // NOI18N
        jLblRegProducto3.setForeground(new java.awt.Color(102, 102, 102));
        jLblRegProducto3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/ver-productos.png"))); // NOI18N
        jLblRegProducto3.setText("Productos");

        jTListaProductos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null}
            },
            new String [] {
                "Codigo", "Nombre", "Precio", "Cantidad", "Subtotal"
            }
        ));
        jScrollPane2.setViewportView(jTListaProductos);

        jBtnEliminarProductoPedido.setFont(new java.awt.Font("Trebuchet MS", 1, 14)); // NOI18N
        jBtnEliminarProductoPedido.setForeground(new java.awt.Color(125, 95, 219));
        jBtnEliminarProductoPedido.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/delete.png"))); // NOI18N
        jBtnEliminarProductoPedido.setText("Eliminar producto");
        jBtnEliminarProductoPedido.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(125, 95, 219), 2, true));
        jBtnEliminarProductoPedido.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnEliminarProductoPedidoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanelProductosLayout = new javax.swing.GroupLayout(jPanelProductos);
        jPanelProductos.setLayout(jPanelProductosLayout);
        jPanelProductosLayout.setHorizontalGroup(
            jPanelProductosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelProductosLayout.createSequentialGroup()
                .addGap(63, 63, 63)
                .addGroup(jPanelProductosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanelProductosLayout.createSequentialGroup()
                        .addComponent(jLblRegProducto3, javax.swing.GroupLayout.PREFERRED_SIZE, 238, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(207, 207, 207)
                        .addComponent(jBtnEliminarProductoPedido, javax.swing.GroupLayout.PREFERRED_SIZE, 172, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 617, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(32, Short.MAX_VALUE))
        );
        jPanelProductosLayout.setVerticalGroup(
            jPanelProductosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelProductosLayout.createSequentialGroup()
                .addGap(12, 12, 12)
                .addGroup(jPanelProductosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.CENTER)
                    .addComponent(jBtnEliminarProductoPedido, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLblRegProducto3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 140, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(15, Short.MAX_VALUE))
        );

        jBtnCancelar.setFont(new java.awt.Font("Trebuchet MS", 0, 18)); // NOI18N
        jBtnCancelar.setForeground(new java.awt.Color(125, 93, 251));
        jBtnCancelar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/delete.png"))); // NOI18N
        jBtnCancelar.setText("Cancelar");
        jBtnCancelar.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(125, 93, 251)));
        jBtnCancelar.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        jBtnCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnCancelarActionPerformed(evt);
            }
        });

        jPanelMesaPer.setBackground(new java.awt.Color(255, 255, 255));
        jPanelMesaPer.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(125, 93, 251), 1, true));
        jPanelMesaPer.setForeground(new java.awt.Color(51, 51, 51));
        jPanelMesaPer.setFont(new java.awt.Font("Trebuchet MS", 0, 18)); // NOI18N

        jLblNombre.setFont(new java.awt.Font("Trebuchet MS", 0, 14)); // NOI18N
        jLblNombre.setText("Nombre:");

        jLblMesa.setFont(new java.awt.Font("Trebuchet MS", 0, 14)); // NOI18N
        jLblMesa.setText("Mesa:");

        jLblPrecio1.setFont(new java.awt.Font("Trebuchet MS", 0, 14)); // NOI18N
        jLblPrecio1.setText("Paga:");

        jLblMesaPedido.setFont(new java.awt.Font("Trebuchet MS", 1, 14)); // NOI18N
        jLblMesaPedido.setForeground(new java.awt.Color(102, 102, 102));
        jLblMesaPedido.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/persona.PNG"))); // NOI18N
        jLblMesaPedido.setText("Pedido por:");

        buttonGroup1.add(jRBtnSi);
        jRBtnSi.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jRBtnSi.setText("Si");

        buttonGroup1.add(jRBtnNo);
        jRBtnNo.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        jRBtnNo.setText("No");

        jCBNombre.setFont(new java.awt.Font("Trebuchet MS", 0, 12)); // NOI18N
        jCBNombre.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione" }));

        jTxtFMesa.setFont(new java.awt.Font("Trebuchet MS", 1, 14)); // NOI18N
        jTxtFMesa.setDisabledTextColor(new java.awt.Color(125, 95, 219));

        javax.swing.GroupLayout jPanelMesaPerLayout = new javax.swing.GroupLayout(jPanelMesaPer);
        jPanelMesaPer.setLayout(jPanelMesaPerLayout);
        jPanelMesaPerLayout.setHorizontalGroup(
            jPanelMesaPerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelMesaPerLayout.createSequentialGroup()
                .addGap(66, 66, 66)
                .addGroup(jPanelMesaPerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLblMesaPedido, javax.swing.GroupLayout.PREFERRED_SIZE, 238, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanelMesaPerLayout.createSequentialGroup()
                        .addGroup(jPanelMesaPerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLblMesa, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanelMesaPerLayout.createSequentialGroup()
                                .addComponent(jTxtFMesa, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                                .addGap(18, 18, 18)))
                        .addGroup(jPanelMesaPerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLblNombre, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jCBNombre, javax.swing.GroupLayout.PREFERRED_SIZE, 417, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanelMesaPerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLblPrecio1, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanelMesaPerLayout.createSequentialGroup()
                                .addComponent(jRBtnSi)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jRBtnNo)))))
                .addContainerGap(55, Short.MAX_VALUE))
        );
        jPanelMesaPerLayout.setVerticalGroup(
            jPanelMesaPerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelMesaPerLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLblMesaPedido)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelMesaPerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLblNombre)
                    .addComponent(jLblPrecio1)
                    .addComponent(jLblMesa))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelMesaPerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanelMesaPerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jRBtnSi)
                        .addComponent(jRBtnNo))
                    .addComponent(jTxtFMesa, javax.swing.GroupLayout.DEFAULT_SIZE, 35, Short.MAX_VALUE)
                    .addComponent(jCBNombre))
                .addGap(18, 18, Short.MAX_VALUE))
        );

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/logo.PNG"))); // NOI18N

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(44, 44, 44)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jPanelProductos, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jPanelMesaPer, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jPanelRegPedido, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(195, 195, 195)
                        .addComponent(jLabel1)))
                .addContainerGap(42, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(jBtnRegPedido, javax.swing.GroupLayout.PREFERRED_SIZE, 152, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(28, 28, 28)
                .addComponent(jBtnCancelar, javax.swing.GroupLayout.PREFERRED_SIZE, 146, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(235, 235, 235))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(9, 9, 9)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jPanelRegPedido, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jPanelProductos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jPanelMesaPer, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jBtnCancelar, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jBtnRegPedido, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jBtnRegPedidoMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jBtnRegPedidoMouseReleased
        jBtnRegPedido.setBackground(new java.awt.Color(125, 93, 251));

    }//GEN-LAST:event_jBtnRegPedidoMouseReleased

    private void jBtnRegPedidoMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jBtnRegPedidoMousePressed

    }//GEN-LAST:event_jBtnRegPedidoMousePressed

    private void jBtnRegPedidoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jBtnRegPedidoMouseClicked

    }//GEN-LAST:event_jBtnRegPedidoMouseClicked

    private void jTxtFPrecioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTxtFPrecioActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTxtFPrecioActionPerformed

    private void jBtnRegProductoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jBtnRegProductoMouseClicked

    }//GEN-LAST:event_jBtnRegProductoMouseClicked

    private void jBtnRegProductoMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jBtnRegProductoMousePressed

    }//GEN-LAST:event_jBtnRegProductoMousePressed

    private void jBtnRegProductoMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jBtnRegProductoMouseReleased


    }//GEN-LAST:event_jBtnRegProductoMouseReleased

    private void jTxtFSubtotalActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTxtFSubtotalActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTxtFSubtotalActionPerformed

    private void jBtnCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnCancelarActionPerformed
        jCBCategoria.setSelectedIndex(0);
        jCBNombreProd.setSelectedIndex(0);
        jTxtFIdProducto.setText("");
        jSpnUnidades.setValue(0);
        jTxtFPrecio.setText("0");
        jRBtnNo.setSelected(true);
        jCBNombre.setSelectedIndex(0);
        DefaultTableModel dm = (DefaultTableModel) jTListaProductos.getModel();
        while (dm.getRowCount() > 0) {
            dm.removeRow(0);
        }
        jTxtFSubtotal.setText("0");
    }//GEN-LAST:event_jBtnCancelarActionPerformed

    private void jSpnUnidadesPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_jSpnUnidadesPropertyChange

    }//GEN-LAST:event_jSpnUnidadesPropertyChange

    private void jSpnUnidadesAncestorMoved(javax.swing.event.AncestorEvent evt) {//GEN-FIRST:event_jSpnUnidadesAncestorMoved

    }//GEN-LAST:event_jSpnUnidadesAncestorMoved

    private void jSpnUnidadesStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_jSpnUnidadesStateChanged
        int num1 = Integer.parseInt(jTxtFPrecio.getText());
        int num2 = (int) jSpnUnidades.getValue();
        int total = num1 * num2;

        jTxtFSubtotal.setText(String.valueOf(total));
    }//GEN-LAST:event_jSpnUnidadesStateChanged

    private void jBtnBorrarProductoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnBorrarProductoActionPerformed
        jCBCategoria.setSelectedIndex(0);
        jCBNombreProd.setSelectedIndex(0);
        jSpnUnidades.setValue(0);
        jTxtFIdProducto.setText("");
        jTxtFPrecio.setText("0");
        
    }//GEN-LAST:event_jBtnBorrarProductoActionPerformed

    //busca el nombre
    private void jCBCategoriaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCBCategoriaActionPerformed

    }//GEN-LAST:event_jCBCategoriaActionPerformed

    private void jCBNombreProdActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCBNombreProdActionPerformed

    }//GEN-LAST:event_jCBNombreProdActionPerformed

    private void jCBCategoriaItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_jCBCategoriaItemStateChanged
        try {
            Object categoria = jCBCategoria.getSelectedItem();
            if (categoria != null) {
                
                if (!categoria.toString().matches("Seleccione")) {
                    jCBNombreProd.removeAllItems();
                    jCBNombreProd.addItem("Seleccione");
                    listaProductos = crud.obtenerProductosPorCategoria(condb, jCBCategoria.getSelectedItem().toString());
                    cargarComboBoxProductos();
                }
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }//GEN-LAST:event_jCBCategoriaItemStateChanged

    private void jCBNombreProdItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_jCBNombreProdItemStateChanged
        Object producto = jCBNombreProd.getSelectedItem();
        if (producto != null) {
            
            if (!producto.toString().matches("Seleccione")) {
                Producto p = new Producto();
                p.setNombreProducto(producto.toString());

                p = crud.buscarProducto(condb, p);
                jTxtFPrecio.setText(String.valueOf(p.getPrecioActual()));
                jTxtFIdProducto.setText(String.valueOf(p.getIdProducto()));
                
                
            } 
        }
    }//GEN-LAST:event_jCBNombreProdItemStateChanged

    public void limpiarTabla(){
              
        //Limpiar la tabla
        int i = 0;
        if (modelo.getRowCount() != 0) {
            while (i != -1) {
                try {
                    modelo.removeRow(modelo.getRowCount() - 1);
                } catch (Exception e) {
                    i = -1;
                }
            }
        }
    }
    
    //agrega el producto a la tabla
    private void jBtnRegProductoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnRegProductoActionPerformed
                   
                     
        Object p  = new Producto();
        int idProducto = Integer.parseInt(jTxtFIdProducto.getText());
        String nombreProducto = jCBNombreProd.getSelectedItem().toString();
        int unidadesDisponibles = (int)jSpnUnidades.getValue();
        int precioActual = Integer.parseInt(jTxtFPrecio.getText());
        int precioSubtotal = unidadesDisponibles * precioActual;
        
        modelo.addRow(new Object[]{
            idProducto, nombreProducto , precioActual, unidadesDisponibles, precioSubtotal 
        });
        
        
    }//GEN-LAST:event_jBtnRegProductoActionPerformed

    private void jBtnEliminarProductoPedidoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnEliminarProductoPedidoActionPerformed
        int fila = jTListaProductos.getSelectedRow();
        modelo.removeRow(fila);
    }//GEN-LAST:event_jBtnEliminarProductoPedidoActionPerformed

    private void jBtnRegPedidoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnRegPedidoActionPerformed
        //toma datos
        boolean pago = jRBtnSi.isSelected();
        int numeroMesa = Integer.parseInt(jTxtFMesa.getText());
        String nombre = jCBNombre.getSelectedItem().toString();
        int idGrupo = Integer.parseInt(idGrupoI);
        
        Pedido pedido = new Pedido();
        if(pago){
            pedido.setEstado(1);
        }else{
            pedido.setEstado(0);
        }
        pedido.setNumeroMesa(numeroMesa);
        pedido.setIdGrupo(idGrupo);
        
        System.out.println(pedido.toString());
        String idPedido = crud.registrarPedido(condb, pedido, nombre);
        //recorrer tabla productos
        
        for(int i = 0; i< jTListaProductos.getRowCount();i++){
            Producto p = new Producto();
            int idProducto =  (int) jTListaProductos.getValueAt(i, 0);
            p.setIdProducto(idProducto);
            p.setNombreProducto((String) jTListaProductos.getValueAt(i, 1));
            int precio = Integer.parseInt(String.valueOf((int) jTListaProductos.getValueAt(i, 2)));
            p.setPrecioActual(precio);
            int unidades =  (int) jTListaProductos.getValueAt(i, 3);
            p.setUnidadesDisponibles(unidades);
            
            //registra
            crud.registrarProductoPedido(condb,p , idPedido);
        }
        
        jBtnRegPedido.setEnabled(false);
    }//GEN-LAST:event_jBtnRegPedidoActionPerformed

    
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JButton jBtnBorrarProducto;
    private javax.swing.JButton jBtnCancelar;
    private javax.swing.JButton jBtnEliminarProductoPedido;
    private javax.swing.JButton jBtnRegPedido;
    private javax.swing.JButton jBtnRegProducto;
    private javax.swing.JComboBox<String> jCBCategoria;
    private javax.swing.JComboBox<String> jCBNombre;
    private javax.swing.JComboBox<String> jCBNombreProd;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLblCategoria;
    private javax.swing.JLabel jLblMesa;
    private javax.swing.JLabel jLblMesaPedido;
    private javax.swing.JLabel jLblNombre;
    private javax.swing.JLabel jLblNombreProducto;
    private javax.swing.JLabel jLblNombreProducto1;
    private javax.swing.JLabel jLblPrecio;
    private javax.swing.JLabel jLblPrecio1;
    private javax.swing.JLabel jLblRegPedido;
    private javax.swing.JLabel jLblRegProducto3;
    private javax.swing.JLabel jLblSubtotal;
    private javax.swing.JLabel jLblUnidades;
    private javax.swing.JPanel jPanelMesaPer;
    private javax.swing.JPanel jPanelProductos;
    private javax.swing.JPanel jPanelRegPedido;
    private javax.swing.JRadioButton jRBtnNo;
    private javax.swing.JRadioButton jRBtnSi;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JSpinner jSpnUnidades;
    private javax.swing.JTable jTListaProductos;
    private javax.swing.JTextField jTxtFIdProducto;
    private javax.swing.JTextField jTxtFMesa;
    private javax.swing.JTextField jTxtFPrecio;
    private javax.swing.JTextField jTxtFSubtotal;
    // End of variables declaration//GEN-END:variables
}
